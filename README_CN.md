# 土豆骨粉阻止器 (Potato Bonemeal Blocker)

## 📋 **插件简介**

土豆骨粉阻止器是一个专为 Minecraft 基岩版服务器设计的插件，用于阻止玩家在土豆作物上使用骨粉，同时允许在其他所有植物上正常使用骨粉。

### **🎯 主要功能**

- ✅ **阻止土豆骨粉使用** - 防止玩家在土豆作物上使用骨粉
- ✅ **保持其他作物正常** - 小麦、胡萝卜、甜菜根等作物可正常使用骨粉
- ✅ **中文消息支持** - 为中文服务器提供完整的中文消息显示
- ✅ **性能优化** - 高效的事件处理，对服务器性能影响极小
- ✅ **统计功能** - 记录被阻止的骨粉使用次数

## 🌏 **语言支持**

### **默认语言：简体中文**

插件默认使用简体中文，适合中文 Minecraft 服务器：

**阻止消息：** `§c骨粉不能用于土豆作物！`  
**提示消息：** `§e你仍然可以在其他作物上使用骨粉。`

### **支持的语言**

- **简体中文 (zh_CN)** - 默认语言
- **英语 (en_US)** - 备用语言

## 🔧 **安装说明**

### **系统要求**

- **LeviLamina 3 v1.2.0** 或更高版本
- **Minecraft 基岩版** 最新版本
- **Windows x64** 平台

### **安装步骤**

1. **下载插件文件**
   ```
   potato-bonemeal-blocker.dll
   manifest.json
   ```

2. **复制到插件目录**
   ```
   plugins/potato-bonemeal-blocker.dll
   plugins/manifest.json
   ```

3. **重启服务器**
   ```bash
   # 停止服务器
   stop
   
   # 启动服务器
   ./bedrock_server_mod.exe
   ```

4. **验证安装**
   
   查看服务器日志中的以下消息：
   ```
   [INFO] 正在加载土豆骨粉阻止器 v1.1.0...
   [INFO] 兼容 LeviLamina 3 v1.2.0
   [INFO] 土豆骨粉阻止器已成功启用！
   ```

## 🎮 **使用方法**

### **游戏内测试**

1. **准备材料**
   - 获取骨粉
   - 种植土豆作物
   - 种植其他作物（小麦、胡萝卜等）

2. **测试阻止功能**
   - 对土豆作物使用骨粉 → 应该被阻止并显示中文消息
   - 对其他作物使用骨粉 → 应该正常工作

3. **预期结果**
   ```
   玩家尝试对土豆使用骨粉时：
   § c骨粉不能用于土豆作物！
   § e你仍然可以在其他作物上使用骨粉。
   ```

## ⚙️ **配置选项**

### **语言配置**

编辑 `config/potato-bonemeal-blocker.json`：

```json
{
    "language": {
        "code": "zh_CN",
        "description": "语言代码：zh_CN (简体中文), en_US (英语)"
    },
    "messages": {
        "show_info_message": true,
        "description": "是否显示额外的提示消息"
    },
    "logging": {
        "log_blocked_attempts": true,
        "description": "是否记录被阻止的骨粉使用尝试"
    }
}
```

### **支持的语言代码**

| 代码 | 语言 | 状态 |
|------|------|------|
| `zh_CN` | 简体中文 | ✅ 默认 |
| `en_US` | 英语 | ✅ 支持 |

## 📊 **性能特性**

### **优化功能**

- **早期返回优化** - 非骨粉物品快速跳过处理
- **字符串视图比较** - 避免不必要的内存分配
- **原子计数器** - 线程安全的统计记录
- **异常安全** - 完善的错误处理机制

### **性能指标**

- **CPU 使用率** - 极低影响（< 0.1%）
- **内存使用** - 最小内存占用
- **延迟** - 微秒级响应时间
- **吞吐量** - 支持高并发玩家操作

## 🔍 **故障排除**

### **常见问题**

#### **1. 插件无法加载**

**错误消息：** `无法加载 PotatoBoneMealBlocker`

**解决方案：**
1. 检查 LeviLamina 版本 >= 1.2.0
2. 安装 Visual C++ 运行库
3. 确认插件文件完整性

#### **2. 消息显示为英文**

**原因：** 语言设置未正确配置

**解决方案：**
1. 检查配置文件中的语言设置
2. 确认 `language.code` 为 `zh_CN`
3. 重启服务器

#### **3. 骨粉仍然可以使用**

**原因：** 事件监听器未正确注册

**解决方案：**
1. 检查服务器日志中的注册消息
2. 确认没有其他插件冲突
3. 重启服务器

### **调试信息**

启用调试日志：
```json
{
    "logging": {
        "debug_level": true,
        "log_blocked_attempts": true
    }
}
```

## 📈 **统计功能**

### **服务器日志**

插件会记录以下信息：
```
[INFO] 阻止了 玩家名 在位置 (x, y, z) 对土豆作物使用骨粉
[INFO] 总计阻止的骨粉使用次数: 123
```

### **统计查询**

管理员可以通过服务器日志查看：
- 被阻止的骨粉使用次数
- 玩家尝试使用骨粉的位置
- 插件运行状态

## 🔄 **更新日志**

### **v1.1.0 - 中文语言支持**

- ✅ 添加完整的简体中文支持
- ✅ 修复 LeviLamina 3 v1.2.0 API 兼容性
- ✅ 优化性能和内存使用
- ✅ 增强错误处理机制
- ✅ 添加配置文件支持

### **v1.0.0 - 初始版本**

- ✅ 基本的土豆骨粉阻止功能
- ✅ 英文消息支持
- ✅ 基础性能优化

## 🤝 **技术支持**

### **获取帮助**

如果遇到问题，请提供以下信息：
- LeviLamina 版本
- 插件版本
- 错误日志
- 服务器配置

### **反馈建议**

欢迎提供功能建议和改进意见，帮助我们为中文 Minecraft 服务器提供更好的插件体验。

---

**专为中文 Minecraft 基岩版服务器设计 🇨🇳**
